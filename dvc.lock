schema: '2.0'
stages:
  generate_data:
    cmd: python generate_data.py data_/
    deps:
    - path: generate_data.py
      hash: md5
      md5: 0f2e488c8432154b8742a9fb8d8eee35
      size: 12201
    params:
      params.yaml:
        generate_data:
          batch_size: 3
        geometry:
          N:
          - 128
          - 128
          - 128
          shrink_factor: 3
          dims: 2
          dx:
          - 0.0001
          - 0.0001
          - 0.0001
          c: 1500
          cfl: 0.3
          pml_margin:
          - 12
          - 12
          - 12
          tissue_margin:
          - 20
          - 20
          - 20
          sensor_margin:
          - 16
          - 16
          - 16
          num_sensors: 81
          sound_speed_periodicity: 2
          sound_speed_variation_amplitude: 10
    outs:
    - path: data_/ATT_masks
      hash: md5
      md5: 0da4f7d35882f83125af4a48f44fe852.dir
      size: 1858944
      nfiles: 3
    - path: data_/P_0/
      hash: md5
      md5: b03be77b73ef944d1898fc7d51bcbb7d.dir
      size: 3932544
      nfiles: 3
    - path: data_/P_data/
      hash: md5
      md5: 95be7642d703c893efbac3c29ac68562.dir
      size: 11644944
      nfiles: 3
    - path: data_/P_data_noisy/
      hash: md5
      md5: cc62e0c529afdb6025344efe72400c8c.dir
      size: 11644944
      nfiles: 3
    - path: data_/angles/
      hash: md5
      md5: 5011c5f6b72bb2c7ab55dfa708244454.dir
      size: 864
      nfiles: 3
    - path: data_/c/
      hash: md5
      md5: 8d396e5592c5a163de3139c0c39ebb8f.dir
      size: 196992
      nfiles: 3
    - path: data_/mu/
      hash: md5
      md5: 2471d100d0bf951af921bb402c853029.dir
      size: 2044800
      nfiles: 3
    - path: data_/sensors/
      hash: md5
      md5: e79b28297ab79ecff962dce247b72985.dir
      size: 4272
      nfiles: 3
  simulate:
    cmd: python simulate.py data/LNet/ data/
    deps:
    - path: data/LNet/
      hash: md5
      md5: 19be49dfd79875228370f0bbc990f198.dir
      size: 90229440
      nfiles: 15
    - path: simulate.py
      hash: md5
      md5: 3a9d24682af8ba4751a1e16ab862cd65
      size: 3177
    params:
      params.yaml:
        geometry:
          N:
          - 256
          - 256
          - 128
          pml_margin: 10
          dx:
          - 0.0001
          - 0.0001
          - 0.0001
          c: 1500
          cfl: 0.3
        simulate:
          num_sensors: 64
          sensor_margin: 10
    outs:
    - path: data/p0/
      hash: md5
      md5: 021a4c90d778371a47f04e70a3a2c93f.dir
      size: 503318400
      nfiles: 15
    - path: data/p_data/
      hash: md5
      md5: 08988240ae32afae4d1b9b790653303c.dir
      size: 4897920
      nfiles: 15
    - path: data/sensors/
      hash: md5
      md5: 3a4ad1a5a7d126c8865a8f91543afdbc.dir
      size: 13440
      nfiles: 15
  reconstruct:
    cmd: python reconstruct.py data_/
    deps:
    - path: data_/ATT_masks
      hash: md5
      md5: 0da4f7d35882f83125af4a48f44fe852.dir
      size: 1858944
      nfiles: 3
    - path: data_/P_0/
      hash: md5
      md5: b03be77b73ef944d1898fc7d51bcbb7d.dir
      size: 3932544
      nfiles: 3
    - path: data_/P_data/
      hash: md5
      md5: 95be7642d703c893efbac3c29ac68562.dir
      size: 11644944
      nfiles: 3
    - path: data_/c/
      hash: md5
      md5: 8d396e5592c5a163de3139c0c39ebb8f.dir
      size: 196992
      nfiles: 3
    - path: data_/sensors/
      hash: md5
      md5: e79b28297ab79ecff962dce247b72985.dir
      size: 4272
      nfiles: 3
    - path: reconstruct.py
      hash: md5
      md5: b202f7d16e588a091366581a55c1fe08
      size: 3375
    - path: time_reversal.py
      hash: md5
      md5: 7071a52eddabdf994bbc801b0fd869e7
      size: 12696
    params:
      params.yaml:
        geometry:
          N:
          - 128
          - 128
          - 128
          shrink_factor: 3
          dims: 2
          dx:
          - 0.0001
          - 0.0001
          - 0.0001
          c: 1500
          cfl: 0.3
          pml_margin:
          - 12
          - 12
          - 12
          tissue_margin:
          - 20
          - 20
          - 20
          sensor_margin:
          - 16
          - 16
          - 16
          num_sensors: 81
          sound_speed_periodicity: 2
          sound_speed_variation_amplitude: 10
    outs:
    - path: data_/c_r/
      hash: md5
      md5: 17a24e91a663202dc191568f45a258a9.dir
      size: 1969920
      nfiles: 30
    - path: data_/mu_r/
      hash: md5
      md5: 28f289bf5c1fcf63ad3e259ca8381c00.dir
      size: 1969920
      nfiles: 30
  visualize:
    cmd: python vis.py
    deps:
    - path: data_/p0/
      hash: md5
      md5: d69ce6fbe46917193afcb9bb90e88854.dir
      size: 16777472
      nfiles: 2
    - path: vis.py
      hash: md5
      md5: 2bdc03b0b3202081af152fb635dd0e4b
      size: 4202
